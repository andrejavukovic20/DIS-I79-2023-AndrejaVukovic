package order;

import java.util.UUID;

import org.springframework.amqp.rabbit.core.RabbitTemplate;
import org.springframework.stereotype.Component;
import events.OrderEventDto;

@Component
public class OrderEventPublisher {

	private final RabbitTemplate rabbitTemplate;

	public OrderEventPublisher(RabbitTemplate rabbitTemplate) {
		this.rabbitTemplate = rabbitTemplate;
	}
	
	public void publishOrderCreatedEvent(String orderId) {
		OrderEventDto dto = new OrderEventDto();
		dto.setEventId(UUID.randomUUID().toString());
		dto.setOrderId(orderId);
		
		rabbitTemplate.convertAndSend(RabbitConfig.ORDER_CREATED_QUEUE, orderId);
		System.out.println("Sent event: ORDER_CREATED for ID = " + orderId);
	}
	
	
	
}
